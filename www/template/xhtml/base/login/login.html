<script>
$(document).ready(function()
{
	$('#BaseLoginUsername').bind('keypress', function(e)
	{
        if(e.keyCode == 13)
        {
        	login();
        }
	});

	$('#BaseLoginPassword').bind('keypress', function(e)
	{
        if(e.keyCode == 13)
        {
        	login();
        }
	});

	
	$('#BaseLoginLogin').click(function()
	{
		login();
	});

	function login()
	{
		$.blockUI({ message: $('#BaseLoginWindow'), css: { width: '275px' } }); 
		$('.blockUI.blockMsg').center();

		$("#BaseLoginWindow").html("<img src='images/animations/loading_circle_small.gif' alt=''> Please wait...");
			
		$.ajax(
		{
			type: "POST",
			url: "ajax.php?nav=base&run=login",
			data: "username="+$("#BaseLoginUsername").val()+"&password="+$("#BaseLoginPassword").val()+"&language="+$("#BaseLoginLanguage").val()+"",
			success: function(data)
			{
				if ((data != '0') && ((data + '').indexOf("index.php?",0) == 0))
				{
					$("#BaseLoginError").html("");
					window.setTimeout('window.location = "'+data+'"',1500);
				}
				else
				{
					if (data != 0)
					{
						$("#BaseLoginError").html(data);
					}
					else
					{
						$("#BaseLoginError").html("");
					}
					$.unblockUI();
				    return false; 
				}
			}
		}); 
	}
});
</script>


<div id="LoginHeader"></div>
<div id="LoginContainer" class="Form">
	<div id='LoginTitle'>Login on Open-LIMS Lab-Manager</div>
	<table id='LoginTable'>
		<tr>
			<td>Username:</td>
			<td><input name='username' type='text' size='20' class='BaseTextfield LoginTextfield' id='BaseLoginUsername' /></td>
		</tr>
		<tr>
			<td>Password:</td>
			<td><input name='password' type='password' size='20' class='BaseTextfield LoginTextfield' id='BaseLoginPassword' /></td>
		</tr>
		<tr>
			<td>Language:</td>
			<td>
				<select class='BaseSelect LoginLanguageSelect' name='language' id='BaseLoginLanguage'>
					<option value='default' selected='selected'>User Default</option>
					<option value='0'>-------------</option>
					<option value='0'>English/English (en-GB)</option>
					<option value='0'>Deutsch/German (de-DE)</option>
				</select>
			</td>
		</tr>
		<tr>
			<td colspan='2'><div class='formError' id='BaseLoginError'></div></td>
		</tr>
		<tr>
			<td></td>
			<td><button type='submit' name='submit' class='BaseButton' id='BaseLoginLogin'>Login</button></td>
		</tr>
		
	</table>
</div>

<div id="BaseLoginWindow" class="BaseBlockUIProceed" style="display:none; cursor: default">
</div>

